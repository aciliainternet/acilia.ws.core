parameters:
    storage.driver: 'local'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    WS\Core\:
        resource: '../../*'
        exclude: '../../{Entity,Migrations,Tests,Widget}'

    WS\Core\Controller\:
        resource: '../../Controller/*'
        tags: ['controller.service_arguments']

    # Tag Services (WS Core Services must have 1024 priority)
    WS\Core\Service\SidebarDefinitionService:
        tags:
            - { name: ws.sidebar_definition, priority: 1024 }

    WS\Core\Widestand:
        tags:
            - { name: ws.component }

    # Data Collector
    WS\Core\Library\DataCollector\BuildCollector:
        tags:
            - { name: data_collector, template: '@WSCore/data_collector/build.html.twig', id: 'ws.build_collector' }

    # Activity Log Subscriber
    WS\Core\EventListener\ActivityLogListener:
        tags:
            - { name: doctrine.event_listener, event: postPersist }
            - { name: doctrine.event_listener, event: preUpdate }
            - { name: doctrine.event_listener, event: preRemove }
